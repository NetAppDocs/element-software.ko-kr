---
permalink: esds/task_esds_configure_the_interface_config_files.html 
sidebar: sidebar 
keywords: solidfire esds, host network, networking 
summary: SolidFire ESDS를 설치하기 전에 제공된 예와 팁을 사용하여 호스트 네트워킹을 구성합니다. 
---
= 호스트 네트워킹을 구성합니다
:icons: font
:imagesdir: ../media/


[role="lead"]
SolidFire ESDS를 설치하기 전에 제공된 예와 팁을 사용하여 호스트 네트워킹을 구성합니다.

다음은 네트워크 구성의 예입니다.

image::../media/esds_network_config_example.png[에서는 네트워크 구성의 예를 보여 줍니다.]

이 예에서는 스토리지 노드에 있는 두 개의 인터페이스가 네트워크입니다 https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/networking_guide/ch-configure_network_teaming#sec-Understanding_Network_Teaming["팀 구성"^] 이중화를 위해 관리 네트워크에 연결됩니다. 마찬가지로 두 개의 추가 인터페이스가 팀으로 구성되며 스토리지 네트워크에 연결됩니다.


NOTE: 각 인터페이스에는 ifcfg-<interface-name> X라는 구성 파일이 있습니다. 여기서 X는 사용되는 명명 규칙에 따라 0 또는 1로 시작하는 인터페이스 수입니다. 구성 파일은 인터페이스를 처음 생성할 때 생성됩니다. 스토리지 네트워크에 접속된 두 개의 물리적 인터페이스 각각에 대해 하나의 구성 파일이 이미 있어야 합니다. 관리 네트워크에 연결된 두 개의 물리적 인터페이스 각각에 대해 하나의 구성 파일도 존재해야 합니다. 인터페이스 구성 파일은 /etc/sysconfig/network-scripts 디렉토리에 있습니다. 을 참조하십시오 https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/networking_guide/getting_started_with_networkmanager["인터페이스 구성 파일"^].


TIP: 이 슬라이드에는 HPE 서버의 스토리지 및 관리 인터페이스 이름이 나와 있습니다. Dell 서버가 있는 경우 인터페이스 이름이 다릅니다. Dell 서버의 스토리지 인터페이스 이름은 EM1 및 EM2입니다. Dell 서버의 관리 인터페이스 이름은 p3p1과 p3p2입니다.

.단계
. NetworkManager-Dispatcher-routing-rules 패키지를 설치하고 적절한 저장소가 구성되어 있는지 확인합니다.
. 스위치 공급업체의 설명서를 사용하여 네트워크 스위치를 구성합니다. 다중 섀시 LAG(Link Aggregation Group) 프로토콜 및 LACP(Link Aggregation Control Protocol) 구성에 대한 자세한 지침은 스위치 공급업체의 설명서를 참조하십시오.
+

NOTE: LACP fallback을 구성하고 'no lacp suspend-individual'을 실행하여 LACP 개별 포트 suspension 동작을 해제하는 것이 좋습니다. 이렇게 하면 잘못 구성된 경우 LACP 패킷이 브로드캐스트되지 않아도 AccessPoint 링크가 활성화됩니다.

. 다음 예를 사용하여 스토리지 네트워크에 연결된 물리적 인터페이스에 대한 두 구성 파일을 편집합니다. 스토리지 네트워크에서 점보 프레임 설정을 사용하는 것이 좋지만 필수는 아닙니다. 아래 예에서는 스토리지 인터페이스 이름이 ens2f0이고 스토리지 팀 이름은 team10G입니다.
+

IMPORTANT: 여기에 나열된 모든 예제 구성에서 이름과 장치는 동일한 값을 사용합니다. 원하는 경우 다른 값을 사용할 수 있습니다.

+
[listing]
----
# cat /etc/sysconfig/network-scripts/ifcfg-ens2f0
# 10G Team Physical Port to Storage Network
NAME=ens2f0
DEVICE=ens2f0
ONBOOT=yes
TEAM_MASTER=team10G
DEVICETYPE=TeamPort
MTU=9000
----
. 다음 예를 사용하여 관리 네트워크에 연결된 인터페이스에 대한 두 개의 구성 파일을 편집합니다. 이 예에서 관리 인터페이스 이름은 eno5이고 관리 팀 이름은 team1G입니다.
+
[listing]
----
# cat ifcfg-eno5
# 1G Team Physical Port to Management Network
NAME=eno5
DEVICE=eno5
ONBOOT=yes
TEAM_MASTER=team1G
DEVICETYPE=TeamPort
----
. 다음 예를 사용하여 스토리지 팀의 팀 인터페이스 파일을 생성합니다. 이 예에서는 team10G라고 합니다. 네트워크 팀 LACP 러너를 실행하는 스토리지 네트워크에 있습니다.
+

NOTE: 스토리지 인터페이스에는 Active/Active 구성이 권장됩니다. 이 구성을 사용하려면 추가 활성/활성 다중 섀시 LAG(Link Aggregation Group) 프로토콜 및 스위치에 구성할 LACP(Link Aggregation Control Protocol)가 필요합니다. 이 구성에는 가 필요합니다 https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/networking_guide/sec-Understanding_the_Network_Teaming_Daemon_and_the_Runners["네트워크 팀 구성 LACP 러너"^].

+
[listing]
----
# cat /etc/sysconfig/network-scripts/ifcfg-team10G
# IPADDR= "SIP"
# GATEWAY= "SIP_GATEWAY"
# Pick one TEAM_CONFIG, activebackup or lacp
# note that lacp require changing switch port to lacp as well

TEAM_CONFIG="{\"runner\": {\"name\": \"lacp\"}, \"link_watch\": {\"name\": \"ethtool\"}}"
PROXY_METHOD=none
BROWSER_ONLY=no
BOOTPROTO=none
DEFROUTE=no
IPV4_FAILURE_FATAL=no
IPV6INIT=no
NAME=team10G
DEVICE=team10G
ONBOOT=yes
DEVICETYPE=Team
IPADDR=192.0.2.2
PREFIX=24
GATEWAY=192.0.2.1
NM_CONTROLLED=yes
MTU=9000
----
. 다음 예제를 사용하여 관리 팀에 대한 팀 인터페이스 파일을 만듭니다. 이 예에서는 team1G라고 합니다. 네트워크 팀 구성 활성 백업 러너를 실행하는 관리 네트워크에 있습니다.
+

NOTE: 액티브/액티브 구성도 사용할 수 있지만 관리 인터페이스에는 액티브/패시브 구성이 권장됩니다. Leaf(엽) 스위치에 추가 구성이 필요하지 않습니다. 이 구성에서는 를 사용합니다 https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/networking_guide/sec-Understanding_the_Network_Teaming_Daemon_and_the_Runners["네트워크 팀 구성 활성 백업 러너"].

+
[listing]
----
# cat /etc/sysconfig/network-scripts/ifcfg-team1G
# IPADDR= "MIP"
# GATEWAY= "MIP_GATEWAY"
# DNS1= "DNS"
# Pick one TEAM_CONFIG, activebackup or lacp
# note that lacp require changing switch port to lacp as well

TEAM_CONFIG="{\"runner\": {\"name\": \"activebackup\"}, \"link_watch\": {\"name\": \"ethtool\"}}"
#TEAM_CONFIG=”{ \”runner\”: {\”name\”: \”lacp\”, \”active\”: true, \”fast_rate\”: true }}”
PROXY_METHOD=none
BROWSER_ONLY=no
BOOTPROTO=none
DEFROUTE=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=no
IPV6_AUTOCONF=yes
IPV6_DEFROUTE=yes
IPV6_FAILURE_FATAL=no
IPV6_ADDR_GEN_MODE=stable-privacy
NAME=team1G
DEVICE=team1G
ONBOOT=yes
DEVICETYPE=Team
IPADDR=198.51.100.2
PREFIX=24
GATEWAY=198.51.100.1
DNS1=198.51.100.250
NM_CONTROLLED=yes
----
. 다음 샘플을 사용하여 새 라우팅 테이블을 사용할 수 있도록 '/etc/iproute2/RT_tables' 파일을 편집합니다. 이 파일은 특정 테이블을 참조하는 인덱스 번호 대신 라우팅 테이블 이름을 사용할 매핑을 정의합니다. 다음 예에서는 team10G라는 새 스토리지 라우팅 테이블을 인덱스(20) 또는 이름(team10G)으로 호출할 수 있습니다.
+
[listing]
----
# cat /etc/iproute2/rt_tables
#
# reserved values
#
255local
254main
253default
0unspec

20   team10G
----
. 다음 예를 사용하여 스토리지 트래픽의 라우팅 테이블에 경로를 추가합니다. 이 라우팅 테이블은 스토리지 네트워크를 기본 게이트웨이로 가리키며 iSCSI 트래픽에 사용되어야 합니다. 다음 예에서는 팀 구성 인터페이스 이름이 team10G입니다.
+

NOTE: '$storage_network', '$storage_if_name src', '$SIP table', '$routing_table_name', '$storage_default_GW dev', '$storage_if_name src', '$SIP table' 및 '$routing_table_name'에 대한 고유 값을 표시합니다.

+
[listing]
----
# cat /etc/sysconfig/network-scripts/route-team10G
$storage_network/24 dev $storage_if_name src $SIP table $routing_table_name
default via $storage_default_gw dev $storage_if_name src $SIP table \
$routing_table_name
----
. 트래픽이 SIP 또는 SVIP에서 발생한 경우 생성한 새 라우팅 테이블을 사용하도록 정책 기반 라우팅을 추가합니다. 다음 예제를 사용하여 사용자 값을 바꿉니다.
+
[listing]
----
# cat /etc/sysconfig/network-scripts/rule-team10G
from $SIP table
$routing_table_name
----
. 적용할 모든 변경 사항에 대해 네트워킹을 다시 시작합니다.
+
[listing]
----
# systemctl restart network.service
----
. 정책 기반 라우팅 규칙을 확인하려면 IP rule show 명령을 실행합니다.
. 라우팅 테이블을 확인하려면 IP route show table 명령을 실행한다.




== 자세한 내용을 확인하십시오

* https://www.netapp.com/data-storage/solidfire/documentation/["NetApp SolidFire 리소스 페이지 를 참조하십시오"^]
* https://docs.netapp.com/sfe-122/topic/com.netapp.ndc.sfe-vers/GUID-B1944B0E-B335-4E0B-B9F1-E960BF32AE56.html["이전 버전의 NetApp SolidFire 및 Element 제품에 대한 문서"^]

